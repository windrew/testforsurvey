<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìµœì¢… ì—°ì¶œ</title>
    <style>
        /* CSSëŠ” ì´ì „ê³¼ ë™ì¼í•©ë‹ˆë‹¤. */
        body, html {
            margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f4f4f9; display: flex; justify-content: center; align-items: center; height: 100%;
        }
        #survey-page {
            background-color: white; max-width: 600px; width: 90%; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: opacity 0.5s;
        }
        button {
            width: 100%; padding: 15px 30px; font-size: 18px; font-weight: bold; cursor: pointer;
            background: linear-gradient(45deg, #6a11cb, #2575fc); color: white; border: none; border-radius: 6px;
        }
        #standby-message { text-align: center; font-size: 24px; font-weight: bold; color: #2575fc; }
        #hacking-video { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 9999; background-color: black; }
    </style>
</head>
<body>
    <div id="survey-page">
        <h1 style="text-align: center;">âœ¨ ì—°ì•  ì‹¬ë¦¬ í…ŒìŠ¤íŠ¸ âœ¨</h1>
        <form id="real-survey-form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfaVMZHSrtaysth2w-TWHRxgI0N08OxwXvt5ejXs2jV-v8ZZg/formResponse">
            <div class="question"><label for="name">ë‹¹ì‹ ì˜ ì´ë¦„ì€?</label><input type="text" id="name" name="entry.1281982188" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required></div>
            <div class="question"><label>ì„ í˜¸í•˜ëŠ” ë°ì´íŠ¸ ìŠ¤íƒ€ì¼ì€?</label><div class="radio-group"><label><input type="radio" name="entry.325326840" value="í™œë™ì ì¸ ë°ì´íŠ¸" required> í™œë™ì ì¸ ë°ì´íŠ¸</label><br><label><input type="radio" name="entry.325326840" value="ì •ì ì¸ ë°ì´íŠ¸"> ì •ì ì¸ ë°ì´íŠ¸</label></div></div>
            <button id="submit-btn" type="submit">ê²°ê³¼ ë¶„ì„ ì‹œì‘í•˜ê¸°</button>
        </form>
    </div>
    
    <video id="hacking-video" src="hacking.mp4" muted preload="auto"></video>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    

    <script>
        // [â­ ì¤‘ìš”] 1ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ firebaseConfig ì½”ë“œë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
        const firebaseConfig = {
            apiKey: "AIzaSyB7boUapvHbQAvUHmhWcphE31PrA_JXrA0",
            authDomain: "event-controller-a24ca.firebaseapp.com",
            projectId: "event-controller-a24ca",
            storageBucket: "event-controller-a24ca.firebasestorage.app",
            messagingSenderId: "164257055931",
            appId: "1:164257055931:web:58ecf24e9081d2063b159e",
            measurementId: "G-JR9Z3GXF2J"
        };

        // Firebase ì•± ì´ˆê¸°í™”
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const surveyPage = document.getElementById('survey-page');
        const surveyForm = document.getElementById('real-survey-form');
        const hackingVideo = document.getElementById('hacking-video');
        let isHackingStarted = false; // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€ìš© í”Œë˜ê·¸

        // í¼ ì œì¶œ ì´ë²¤íŠ¸ ì²˜ë¦¬ (ì´ì „ê³¼ ë™ì¼)
        surveyForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const formData = new FormData(surveyForm);
            fetch(surveyForm.action, { method: 'POST', body: formData, mode: 'no-cors' });
            surveyPage.innerHTML = '<div id="standby-message">ğŸ“Š<br><br>ê²°ê³¼ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</div>';
        });


        // [â­ ë³€ê²½] Firebase ë°ì´í„°ë² ì´ìŠ¤ì˜ 'hackStatus' ê°’ì´ ë°”ë€ŒëŠ”ì§€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€
        database.ref('hackStatus').on('value', (snapshot) => {
            const data = snapshot.val();
            // ê°’ì´ 'start'ì´ê³ , ì•„ì§ í•´í‚¹ì´ ì‹œì‘ë˜ì§€ ì•Šì•˜ë‹¤ë©´
            if (data === 'start' && !isHackingStarted) {
                isHackingStarted = true; // ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
                startHacking();
            }
        });

        function startHacking() {
        surveyPage.style.opacity = '0';
        
        setTimeout(() => {
            surveyPage.style.display = 'none';
            // í™”ë©´ ìŠ¤í¬ë¡¤ë°” ì œê±° (ì „ì²´ í™”ë©´ì²˜ëŸ¼ ë³´ì´ê²Œ)
            document.body.style.overflow = 'hidden'; 
            
            hackingVideo.style.display = 'block';
            hackingVideo.play();
            // âŒ ì´ ì¤„ì„ ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•˜ì„¸ìš”.
            // hackingVideo.requestFullscreen(); 
            // ğŸ’¡ "ê°€ì§œ" ì „ì²´ í™”ë©´ì€ ì´ í˜¸ì¶œ ì—†ì´ë„ CSSë¡œ ì¶©ë¶„íˆ êµ¬í˜„ë©ë‹ˆë‹¤.
        }, 500); 
    }
    </script>
</body>
</html>